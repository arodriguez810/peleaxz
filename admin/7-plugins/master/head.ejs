<head>
    <% var root = '../../'; %>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title><%= CONFIG.appName %></title>

    <!-- Global stylesheets -->
    <link rel="shortcut icon" type="image/svg" href="/assets/images/<%= COLOR.logo %>.svg"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900" rel="stylesheet"
          type="text/css">
    <link href="assets/css/icons/icomoon/styles.css" rel="stylesheet" type="text/css">

    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/core.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/components.css" rel="stylesheet" type="text/css">
    <link href="assets/css/extras/animate.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/sweetalert2.min.css" rel="stylesheet" type="text/css">
    <link href="assets/js/plugins/date/jquery.datetimepicker.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/colors.css" rel="stylesheet" type="text/css">
    <link href="assets/js/plugins/date/yearpicker.css" rel="stylesheet" type="text/css">

    <% localStyles.forEach(function(item){ %>
        <link href="<%= FOLDERS.styles %>/<%= item %>" rel="stylesheet" type="text/css">
    <% }); %>

    <link href="<%= FOLDERS.themes %>/extra.css" rel="stylesheet" type="text/css">
    <link href="<%= FOLDERS.themes %>/secundary.css" rel="stylesheet" type="text/css">
    <link href="<%= FOLDERS.themes %>/primary.css" rel="stylesheet" type="text/css">
    <style>
        .select2-results__option--highlighted, .cancelmodal, .modal-title {
            color: <%= CONFIG.ui.theme.text2 %> !important;
        }

        .select2-results__option--highlighted {
            background-color: <%= CONFIG.ui.theme.secundary %> !important;
        }
    </style>


    <script type="text/javascript" src="assets/js/plugins/loaders/pace.min.js"></script>
    <script type="text/javascript" src="assets/js/core/libraries/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/notifications/pnotify.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/notifications/noty.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/editors/autosize.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/inputs/jquery.mask.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/tables/datatables/datatables.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/tables/datatables/extensions/responsive.min.js"></script>
    <script type="text/javascript" src="assets/js/core/libraries/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/loaders/blockui.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/tables/footable/footable.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/uploaders/dropzone.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/styling/uniform.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/styling/switchery.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/styling/switch.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/selects/select2.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/inputs/typeahead/typeahead.bundle.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/tags/tagsinput.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/inputs/maxlength.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/forms/inputs/formatter.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/ui/moment/moment.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/ui/moment/moment_locales.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/tinycolor/min.js"></script>

    <script type="text/javascript" src="assets/js/plugins/sweetalert/sweetalert2.all.js"></script>
    <script type="text/javascript" src="assets/js/plugins/numeral/numeral.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/numeral/currency.min.js"></script>
    <script type="text/javascript" src="assets/js/core/libraries/angular.min.js"></script>
    <script type="text/javascript" src="assets/js/core/libraries/angular-sanitize.js"></script>
    <script type="text/javascript" src="assets/js/core/libraries/angular-resource.js"></script>
    <script type="text/javascript" src="assets/js/core/libraries/ui-bootstrap-tpls.js"></script>
    <script type="text/javascript" src="node_modules/table-dragger/dist/table-dragger.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/excel/excelexportjs.js"></script>
    <script type="text/javascript" src="assets/js/plugins/docx/html-docx.js"></script>
    <script type="text/javascript" src="assets/js/plugins/editors/codemirror/codemirror.js"></script>
    <script type="text/javascript" src="assets/js/plugins/editors/codemirror/mode/sql/sql.js"></script>
    <script type="text/javascript" src="assets/js/plugins/editors/codemirror/mode/javascript/javascript.js"></script>
    <script type="text/javascript" src="assets/js/core/app.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=<%= CONFIG.googlemap %>&amp;sensor=false&amp;libraries=places"></script>
    <script type="text/javascript" src="assets/js/plugins/editors/summernote/summernote.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/onesignal/index.js"></script>

    <% localjs.forEach(function(item){ %>
        <script src="<%= FOLDERS.scripts %>/<%= item %>"></script>
    <% }); %>

    <%

    $type = String;
    $type.__typeName = 'String';
    $type.__class = true;
    $prototype = $type.prototype;
    $prototype.replaceAll = function(search, replacement) {
        var target = this;
        return target.replace(new RegExp(search, 'g'), replacement);
    };

    MENUONEROW = [];
    addMenu = function (prefix, array) {
        for (var menu of array) {
            if (menu.href !== "#") {
                MENUONEROW.push({
                    id: menu.href,
                    icon: menu.icon,
                    category: prefix.join(", "),
                    name: menu.text
                });
            } else {
                if (menu.menus !== undefined) {
                    var newprefix = [];
                    for (var i in prefix)
                        newprefix.push(prefix[i]);
                    newprefix.push(menu.text);
                    addMenu(newprefix, menu.menus);
                }
            }
        }
    }
    addMenu([], CONFIG.menus);
    %>
    <script>
        const USD = value => currency(value, {symbol: '$', decimal: ',', separator: '.'});
        const JPY = value => currency(value, {precision: 0, symbol: '¥'});
        const EURO = value => currency(value, {symbol: '€', decimal: ',', separator: '.'});
        const DOP = value => currency(value, {symbol: '$', decimal: '.', separator: ','});

        MENUMODAL = false;
        CHANGINGMENU = true;
        PRUDENTS = {};
        CURRENTPRUDENTS = "";
        WARNINGREQUESTS = [];
        Dropzone.autoDiscover = false;
        CONFIG = "<%= JSON.stringify(CONFIG) %>";
        CONFIG = eval("(" + CONFIG.replaceAll("&#34;", '"') + ")");
        MENUONEROW = "<%= JSON.stringify(MENUONEROW) %>";
        MENUONEROW = eval("(" + MENUONEROW.replaceAll("&#34;", '"') + ")");
        LANGUAGE = "<%= JSON.stringify(LANGUAGE) %>";
        LANGUAGE = eval("(" + LANGUAGE.replaceAll("&#34;", '"') + ")");
        CONTROLS = "<%= JSON.stringify(controls) %>";
        CONTROLS = eval("(" + CONTROLS.replaceAll("&#34;", '"') + ")");
        SHOWLANGS = "<%= JSON.stringify(SHOWLANGS) %>";
        SHOWLANGS = eval("(" + SHOWLANGS.replaceAll("&#34;", '"') + ")");
        COLOR = "<%= JSON.stringify(COLOR) %>";
        COLOR = eval("(" + COLOR.replaceAll("&#34;", '"') + ")");
        TAG = "<%= JSON.stringify(TAG) %>";
        TAG = eval("(" + TAG.replaceAll("&#34;", '"') + ")");
        FOLDERS = "<%= JSON.stringify(FOLDERS) %>";
        FOLDERS = eval("(" + FOLDERS.replaceAll("&#34;", '"') + ")");
        THEMES = "<%= JSON.stringify(THEMES) %>";
        THEMES = eval("(" + THEMES.replaceAll("&#34;", '"') + ")");
        DATA = "<%= JSON.stringify(DATA) %>";
        DATA = "<%= JSON.stringify(DATA) %>";
        DATA = eval("(" + DATA.replaceAll("&#34;", '"') + ")");
        SERVICES = "<%= JSON.stringify(SERVICES) %>";
        SERVICES = eval("(" + SERVICES.replaceAll("&#34;", '"') + ")");
        SERVICE.run(SERVICES);
        MODEL = {};
        MODELLIST = "<%= JSON.stringify(models) %>";
        MODELLIST = eval("(" + MODELLIST.replaceAll("&#34;", '"') + ")");
        CONTROLLERS = "<%= JSON.stringify(controllersjs) %>";
        CONTROLLERS = eval("(" + CONTROLLERS.replaceAll("&#34;", '"') + ")");
        CONTROLLERSNAMES = [];
        for (var CONTROLLER of CONTROLLERS) {
            var name = CONTROLLER.split('CO_')[1].split('.js')[0];
            if (["BASE"].indexOf(name) === -1)
                CONTROLLERSNAMES.push(name);
        }
        RELATIONS = {};
        RELATIONS.anonymous = [];
        var space = " ";
        var quote = "'";
        $(".sidebar, .navbar, .navbar-brand, .navbar-text, .navbar-nav > li, .page-header, .page-title, .page-header .heading-elements, .breadcrumb, .breadcrumb-elements > li, .content > .panel, .content .row > [class*=col-], .footer")
            .css('opacity', 0);
        MESSAGE.run();
        PERMISSIONS.format();
        LAN = MESSAGE.current();
        LAN.money = eval(LAN.money);
        moment.locale(LAN.time);
        PLAYERID = null;
    </script>
    <script>
        if (CONFIG.features.onesignal) {
            var OneSignal = window.OneSignal || [];
            OneSignal.push(function () {
                OneSignal.init({
                    appId: CONFIG.onesignal.app.appId,
                    autoResubscribe: true,
                    autoRegister: true,
                    welcomeNotification: {
                        disable: true
                    }
                });

                OneSignal.on('subscriptionChange', function (isSubscribed) {
                    OneSignal.getUserId().then(function (userId) {
                        PLAYERID = userId;
                    });
                });
                OneSignal.getUserId().then(function (userId) {
                    PLAYERID = userId;
                });
            });

        }
    </script>
    <script type="text/javascript" src="assets/js/plugins/pickers/color/spectrum.js"></script>
    <script type="text/javascript" src="assets/js/plugins/date/jquery.datetimepicker.full.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/date/daterangepicker.min.js"></script>
    <link href="assets/js/plugins/date/daterangepicker.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="assets/js/plugins/date/yearpicker.js"></script>
    <% crudjs.forEach(function(item){ %>
        <script src="<%= item %>"></script>
    <% }); %>
    <script>
        <% silentsmodels.forEach(function(item){ %>
        <%- include('../../7-plugins/templates/system/crud',{scope:item}); %>
        <% }); %>
    </script>
    <% controllersjs.forEach(function(item){ if(item != undefined){ %>
        <script src="<%= item %>"></script>
    <% }}); %>
    <script>
        <% silentsmodels.forEach(function(item){ %>
        <%- include('../../7-plugins/templates/system/controller',{scope:item}); %>
        <% }); %>
    </script>
    <% localserver.forEach(function (item) {
        if (item != undefined) {
            include("../../server/" + item);
        }
    }); %>

    <script type="text/javascript" src="assets/js/plugins/mask/jquery.inputmask.bundle.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/echarts.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/theme/limitless.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/pie.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/funnel.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/bar.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/chord.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/eventRiver.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/force.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/gauge.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/heatmap.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/k.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/line.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/map.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/radar.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/scatter.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/tree.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/treemap.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/venn.js"></script>
    <script type="text/javascript" src="assets/js/plugins/visualization/echarts/chart/wordCloud.js"></script>


</head>
<body ng-app="app">

<% include splash %>

<div id="baseController" ng-controller="baseController as baseController" style="display: none">
    <div id="modalpool">

    </div>
    <button style="opacity: 0.6" dragonlanguage="" class=" upButtom btn bg-<%= COLOR.primary %>"
            title="MESSAGE.i('mono.GoToUp')">
        <i style="font-size: 30px;" class="  icon-arrow-up8"></i></button>
    <% include navbar %>
    <!-- Page container -->
    <div class="page-container">
        <!-- Page content -->
        <div class="page-content">
            <% include menu %>
            <!-- Main content -->
            <div class="content-wrapper">
                <!-- Content area -->
                <div class="content" id="content" style="overflow: hidden">
                    <!-- Error title -->
                    <div class="text-center content-group"
                         style="background-color: #fff;min-height: 500px;margin-bottom: 0px !important;margin-top: -20px !important;">
                        <h1 class="error-title dragon-welcome"
                            style="color: <%= CONFIG.ui.theme.primary %>;text-shadow: 0 1px 0 <%= CONFIG.ui.theme.secundary %>,0 2px 0 <%= CONFIG.ui.theme.secundary %>,0 3px 0 <%= CONFIG.ui.theme.secundary %>,0 4px 0 <%= CONFIG.ui.theme.secundary %>,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);">
                            <%= CONFIG.appName %>
                            <script>
                                if (document.location.href.indexOf('#') === -1 && new SESSION().current().homePage) {
                                    new HTTP().redirecttag(new SESSION().current().homePage.replace('#', ''));
                                } else if (document.location.href.indexOf('#') === -1) {
                                    new HTTP().redirecttag(CONFIG.home.replace('#', ''));
                                }
                            </script>
                        </h1>
                    </div>
                    <!-- /error title -->
