<%
var name = name || "";
var options = {
    title: params.capitalize(name),
    type: "text",
    icon: {
        class: "none",
        position: "left",
        color: TAG.table + "-800"
    },
    items: ['n/a']
};

options = OBJECT.merge(options, opts); var nameclean = name.replace(/\./g, '_');
options.model = options.model ? options.model : false;
var toclient = JSON.stringify(options);
%>
<script>
    <%= model %>.triggers.table.before.control("<%= name %>");
    if (!<%= model %>.
    charts
    )<%= model %>.charts = {};
    eval(`<%= model %>.charts.<%= name %> = ${"<%= toclient %>".replaceAll("&#34;", '"').replaceAll("&#39", "'")}`);
</script>

<script>

    $(function () {

        // Set paths
        // ------------------------------
        if(<%= model %>.charts.<%= name %>.onLoad===undefined)
        <%= model %>.charts.<%= name %>.onLoad = function(){

        }

        require.config({
            paths: {
                echarts: 'assets/js/plugins/visualization/echarts'
            }
        });
        require(
            [
                'echarts',
                'echarts/theme/limitless',
                'echarts/chart/line',
                'echarts/chart/scatter',
                'echarts/chart/k',
                'echarts/chart/radar',
                'echarts/chart/gauge'
            ],
            function (ec, limitless) {

                <%= model %>.
                charts.<%= name %>_chart = ec.init(document.getElementById('<%= name %>'), limitless);
                <%= model %>.charts.<%= name %>.refresh  = function () {
                    <%= model %>.
                charts.<%= name %>_chart_options = {
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        orient: 'vertical',
                        x: 'left',
                        data: <%= model %>.<%= name %>_data.legend
                    },
                    polar: [{
                        radius: '80%',
                        indicator: <%= model %>.<%= name %>_data.polar
                    }],
                    toolbox: {
                        show: true,
                        orient: 'horizontal',
                        x: 'left',
                        y:"80%",
                        feature: {
                            restore: {
                                show: true,
                                title: 'Restore'
                            },
                            saveAsImage: {
                                show: true,
                                title: 'Same as image',
                                lang: ['Save']
                            }
                        }
                    },
                    calculable: true,
                        series: [{
                    type: 'radar',
                    itemStyle: {
                        normal: {
                            areaStyle: {
                                type: 'default'
                            }
                        }
                    },
                    data: <%= model %>.<%= name %>_data.data
                }]
                };
                                    <%= model %>.charts.<%= name %>_chart.setOption(<%= model %>.charts.<%= name %>_chart_options);                     setTimeout(function () {                         <%= model %>.                         charts.<%= name %>_chart.resize();                     }, 3000);                 }
                <%= model %>.charts.<%= name %>.onLoad();
            }
        );
    });

</script>